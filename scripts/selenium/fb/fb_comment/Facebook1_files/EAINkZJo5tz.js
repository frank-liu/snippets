/*1364827657,173217057*/

if (self.CavalryLogger) { CavalryLogger.start_js(["C3y7c"]); }

__d("DynamicFacepile",["DOM","TooltipLink","URI","XHPTemplate","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('TooltipLink'),i=b('URI'),j=b('XHPTemplate'),k=b('copyProperties');function l(){}k(l.prototype,{init:function(m,n,o,p){this._facepile=o;this._maxFacepileSize=n;this._memberIDs=m;this._facepileItemMap={};var q=g.scry(this._facepile,'li');for(var r=0,s=m.length;r<s;++r)this._facepileItemMap[m[r]]=q[r];this._template=p;},containsID:function(m){return this._facepileItemMap[m];},removeFacepileItem:function(m){var n=this._facepileItemMap[m.uid];if(!n)return;delete this._facepileItemMap[m.uid];this._memberIDs.splice(this._memberIDs.indexOf(m.uid),1);g.remove(n);},addFacepileItem:function(m){var n=this._template.render(),o=j.getNode(n,'img');o.src=m.photo;var p=j.getNode(n,'anchor');p.href=i('/profile.php').addQueryData({id:m.uid});h.setTooltipText(p,m.name);g.prependContent(this._facepile,n);this._facepileItemMap[m.uid]=n;this._memberIDs.unshift(m.uid);if(this._memberIDs.length>this._maxFacepileSize){var q=this._memberIDs.pop(),r=this._facepileItemMap[q];g.remove(r);delete this._facepileItemMap[q];}}});e.exports=l;});
__d("FriendsDashSideCol",["Arbiter","AsyncRequest","CSS","DOM","PageTransitions","UIIntentionalStreamMessage","$"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('PageTransitions'),l=b('UIIntentionalStreamMessage'),m=b('$'),n={init:function(o){this._flid=o;var p='listeditor/friend_lists_changed',q=g.subscribe(p,function(r,s){if(r==p&&s.list_info.list_id==this._flid){if(s.refresh_member_box)new h('/ajax/friends/lists/list_modified.php').setMethod('GET').setReadOnly(true).setData({list_id:this._flid}).send();if(s.removed_uid){j.scry(m('home_stream'),'.aid_'+s.removed_uid).forEach(i.hide);}else if(s.undo_remove&&s.added_uid){j.scry(m('home_stream'),'.aid_'+s.added_uid).forEach(i.show);}else g.inform(l.REFRESH_STREAM,{filter:'fl_'+this._flid,noScroll:1});}}.bind(this),g.SUBSCRIBE_NEW);k.registerHandler(g.unsubscribe.curry(q));}};e.exports=n;});
__d("legacy:friends-dash-sidecol-js",["FriendsDashSideCol"],function(a,b,c,d){a.FriendsDashSideCol=b('FriendsDashSideCol');},3);
__d("legacy:DynamicFriendListEducation",["DynamicFriendListEducation"],function(a,b,c,d){a.DynamicFriendListEducation=b('DynamicFriendListEducation');},3);
__d("FriendListFilterNUXDialog",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h={init:function(i){g.subscribe(['FriendListMemberTypeahead/add','FriendListSuggestions/add'],function(){i.hide();});}};e.exports=h;});
__d("FriendListMembersBox",["Arbiter","CSS","DOM","DynamicFacepile","PageTransitions","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DynamicFacepile'),k=b('PageTransitions'),l=b('copyProperties'),m=b('tx');function n(){}l(n.prototype,{init:function(o,p,q,r,s,t,u){this._root=o;this._flid=p;this._listSize=r;this._headerTitle=i.find(this._root,'.uiHeaderTitle');this._headerActions=i.find(this._root,'.uiHeaderActions a');this._facepile=new j();this._facepile.init(q,s,t.firstChild,u);var v=[g.subscribe(['FriendListSuggestions/add','FriendListMemberTypeahead/add','FriendListHovercard/add'],this.handleAddEvent.bind(this)),g.subscribe('FriendListHovercard/remove',this.handleRemoveEvent.bind(this))];k.registerHandler(function(){v.forEach(g.unsubscribe);});},handleAddEvent:function(o,p){if(p.flid!==this._flid||!p.uid)return;if(this._facepile.containsID(p.uid))return;if(!p.photo||!p.name){d(['ShortProfiles'],function(q){q.get(p.uid,function(r,s){if(s.exist){r.flid=this._flid;r.photo=s.thumbSrc;r.name=s.firstName;this._facepile.addFacepileItem(r);}}.bind(this,p));}.bind(this));}else this._facepile.addFacepileItem(p);h.removeClass(this._root,'empty');h.show(this._headerActions);this._listSize++;this.updateListSize();},handleRemoveEvent:function(o,p){if(p.flid!==this._flid||!p.uid)return;this._listSize--;this.updateListSize();this._facepile.removeFacepileItem(p);},updateListSize:function(){i.setContent(this._headerTitle,m._("On This List ({num_members})",{num_members:this._listSize}));}});e.exports=n;});
__d("legacy:FriendListMembersBox",["FriendListMembersBox"],function(a,b,c,d){a.FriendListMembersBox=b('FriendListMembersBox');},3);
__d("FriendListMenu",["Event","Arbiter","AsyncRequest","CSS","DOM","HTML","Focus","Input","Keys","MenuDeprecated","Parent"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('CSS'),k=b('DOM'),l=b('HTML'),m=b('Focus'),n=b('Input'),o=b('Keys'),p=b('MenuDeprecated'),q=b('Parent'),r={init:function(s){p.register(s,false);var t=k.find(s,'.FriendListCreateTrigger'),u=k.find(s,'.CreateListInputItem'),v=k.find(u,'.createListInput');p.subscribe('select',function(w,x){if(x.item==t){j.addClass(s,'FriendListMenuCreate');m.set(v);}});g.listen(v,'blur',function(w){if(n.isEmpty(v))j.removeClass(s,'FriendListMenuCreate');});g.listen(v,'keydown',function(w){if(g.getKeyCode(w)==o.RETURN&&/[^\s]/.test(v.value))new i().setURI('/ajax/friends/lists/create.php').setData({name:v.value,id:s.id}).setHandler(function(){n.reset(v);j.removeClass(s,'FriendListMenuCreate');}).send();});h.subscribe('friend-list/new',function(w,x){var y=l(x.new_li).getRootNode();k.insertBefore(t,y);if(x.id===s.id){p.focusItem(y);p.inform('select',{menu:q.byClass(y,'uiMenu'),item:y});}else p.toggleItem(y);});},addToAnotherList:function(s,t){g.listen(s,'click',function(event){var u=q.byClass(s,'FlyoutFriendMenu');j.removeClass(u,'addToListsClosed');j.addClass(u,'addToListsOpen');});},goBack:function(s,t){g.listen(s,'click',function(event){var u=q.byClass(s,'FlyoutFriendMenu');j.removeClass(u,'addToListsOpen');j.addClass(u,'addToListsClosed');});}};e.exports=r;});
__d("FriendListSuggestions",["Event","Arbiter","AsyncRequest","AsyncSignal","Bootloader","CSS","DOM","DynamicFriendListEducation","PageTransitions","Parent","UserAgent","copyProperties","csx","ge"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('AsyncSignal'),k=b('Bootloader'),l=b('CSS'),m=b('DOM'),n=b('DynamicFriendListEducation'),o=b('PageTransitions'),p=b('Parent'),q=b('UserAgent'),r=b('copyProperties'),s=b('csx'),t=b('ge');function u(){}r(u.prototype,{init:function(v,w,x,y,z){this._container=v;this._flid=w;this._shouldSave=x;this._context=y;this._source=z;var aa=g.listen(v,'click',function(ca){var da=ca.getTarget();p.byClass(da,'addLink')&&this._handleAdd(da);p.byClass(da,'declineButton')&&this._handleDecline(da);}.bind(this));if(q.ie()<7)k.loadModules(['ExplicitHover'],function(ca){this._explicitHover=new ca(this._container,'friendListSuggestion');}.bind(this));var ba=h.subscribe('FriendListMemberTypeahead/add',function(ca,da){var ea=t('suggestion_'+da.uid);ea&&this._swap(ea);}.bind(this));o.registerHandler(function(){aa.remove();ba.unsubscribe();this._explicitHover&&this._explicitHover.uninstall();}.bind(this));},_handleDecline:function(v){var w=p.byTag(v,'li');this._swap(w);},_handleAdd:function(v){var w=p.byTag(v,'li'),x=this._getUIDFromItem(w),y=function(z){if(z&&z.nux_cancel)return;this._swap(w);if(this._shouldSave)this._save(x,z);var aa=m.scry(w,"img._s0")[0],ba=m.find(w,'td.userSuggestionName');h.inform('FriendListSuggestions/add',{flid:this._flid,uid:x,name:m.getText(ba),photo:aa.src});}.bind(this);n.showContextualDialog(this._flid,x,v,y);},_getUIDFromItem:function(v){return ''+v.id.split('_')[1];},_swap:function(v){m.remove(v);var w=m.scry(this._container,'li.hidden_elem')[0];if(!w)return;l.show(w);var x=this._getUIDFromItem(w),y=''+w.getAttribute('data-coeff-key'),z={tids:[x],key:y};new j('/friends/ajax/log_data.php',z).send();},_save:function(v,w){var x={flid:this._flid,id:v,add:1,source:this._source};x[this.context]=1;if(w)r(x,w);new i().setURI('/friends/ajax/lists.php').setData(x).send();}});e.exports=u;});
__d("legacy:FriendListSuggestions",["FriendListSuggestions"],function(a,b,c,d){a.FriendListSuggestions=b('FriendListSuggestions');},3);
__d("RestrictedFriendListEducation",["Arbiter","AsyncRequest"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i,j;function k(m,n){if(n.flid==i)if(m=='FriendListHovercard/add'){if(j)return;j=true;new h().setURI('/ajax/friends/lists/restricted_edu.php').setData({target:n.uid,flid:n.flid}).send();}else if(m=='RestrictedListNUX/okay')new h().setURI('/ajax/friends/lists/nux_log.php').setData(n).send();return true;}var l={init:function(m){i=m;g.subscribe(['FriendListHovercard/add','RestrictedListNUX/okay'],k);}};e.exports=l;});
__d("legacy:FriendListRestrictedEducation",["RestrictedFriendListEducation"],function(a,b,c,d){a.RestrictedFriendListEducation=b('RestrictedFriendListEducation');},3);
__d("FriendListMemberBoxTypeahead",["Arbiter","AsyncRequest","CSS","DynamicFriendListEducation","Event","PageTransitions","Style","copyProperties","removeFromArray"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DynamicFriendListEducation'),k=b('Event'),l=b('PageTransitions'),m=b('Style'),n=b('copyProperties'),o=b('removeFromArray');function p(){}n(p.prototype,{init:function(q,r,s){k.listen(q.getCore().getElement(),'keyup',function(event){i.conditionClass(event.getTarget(),'noPadding',m.get(event.getTarget(),'direction')=='rtl');});q.subscribe('select',function(u,v){var w=function(y){g.inform('FriendListMemberTypeahead/add',{flid:r,uid:v.selected.uid,name:v.selected.text,path:v.selected.path,photo:v.selected.photo});var z={add:1,search:1,source:s,flid:r,id:v.selected.uid};n(z,y);new h().setURI('/friends/ajax/lists.php').setData(z).send();};if(v.selected.subscribee||v.selected.type=='page')return w();j.showDialog(r,v.selected.uid,w);var x=q.getData().getExclusions();x.push(v.selected.uid);q.getData().setExclusions(x);});var t=g.subscribe('listeditor/friend_lists_changed',function(u,v){if(v.list_info.list_id==r){var w=q.getData().getExclusions();if(v.removed_uid){o(w,v.removed_uid);}else if(v.added_uid)w.push(v.added_uid);q.getData().setExclusions(w);}},g.SUBSCRIBE_NEW);l.registerHandler(g.unsubscribe.curry(t));}});e.exports=p;});
__d("legacy:FriendListMemberBoxTypeahead",["FriendListMemberBoxTypeahead"],function(a,b,c,d){a.FriendListMemberBoxTypeahead=b('FriendListMemberBoxTypeahead');},3);
__d("SourceSuggestionMegaphone",["Animation","AsyncRequest","CSS","DOM","copyProperties","$","createObjectFrom","cx"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('copyProperties'),l=b('$'),m=b('createObjectFrom'),n=b('cx'),o=400,p=235,q=7;function r(s,t,u){if(j.scry(l(t),'#pagelet_home_stream')){this._megaphone=j.find(j.prependContent(l(t),s)[0],'#source_suggestion_megaphone_content_id');this._picker=j.find(this._megaphone,'#source_suggestion_picker');this._collector=j.scry(this._megaphone,'#source_suggestion_collector');if(this._collector.length>0)this._collector=this._collector[0];this._button=j.find(this._megaphone,'.doneButton');this._sourceCount=u.length;this._selected_sources=m(u);this._source_added=0;this._expandedMode=false;}}k(r.prototype,{_expandPicker:function(){if(!this._expandedMode){this._expandedMode=true;new g(this._picker).to('height',p).duration(o).go();this._fadeIn(this._button,o);}},_fadeIn:function(s,t,u){new g(s).show().from('opacity',0).to('opacity',1).duration(t).ondone(u).go();},_fadeOut:function(s,t,u){new g(s).from('opacity',1).to('opacity',0).hide().duration(t).ondone(u).go();},_hideMegaphone:function(s){this._fadeOut(l(s),o);},_toggleSource:function(s,t,u){this._expandPicker();var v=j.find(this._picker,'ul'),w=j.find(this._collector,'ul'),x=j.scry(this._megaphone,'#'+s);if(this._selected_sources[s]){this._sourceCount--;this._source_added--;this._selectElem(x[0],v,false);this._selected_sources[s]=false;}else{this._sourceCount++;this._source_added++;if(t)t();this._selected_sources[s]=true;if(x.length){this._selectElem(x[0],w,true);if(u)u();}else{new h().setURI('/ajax/friends/lists/cf_megaphone/picker_item').setData({id:s}).setHandler(function(y){var z=j.prependContent(w,y.payload)[0];this._fadeIn(z,o);this._postSelect(true);this._selected_sources[s]=true;}.bind(this)).send();return;}}},_selectElem:function(s,t,u){var v=j.find(s,'.collector_item'),w=j.find(s,'.picker_item'),x=u?v:w,y=u?w:v;this._fadeOut(s,o,function(){j.prependContent(t,s);i.show(x);i.hide(y);this._fadeIn(s,o);}.bind(this));this._postSelect(u);},_postSelect:function(s){if(s){if(this._sourceCount===q+1){i.show(l('source_suggestion_collector_overflow_num'));}else if(this._sourceCount>q+1)this._updateCount();if(this._sourceCount){i.addClass(this._collector,"sourceSuggestionCollectorNonempty");i.show(l('source_suggestion_collector_placeholder'));}}else{if(this._sourceCount===q){i.hide(l('source_suggestion_collector_overflow_num'));}else if(this._sourceCount>q)this._updateCount();if(!this._sourceCount){i.removeClass(this._collector,"sourceSuggestionCollectorNonempty");i.hide(l('source_suggestion_collector_placeholder'));}}},_updateCount:function(){var s="_wj fbTimelineBoxCount fbTimelineBoxCountFriends",t=j.scry(this._megaphone,'.fbTimelineBoxCountFriends');if(t[0])j.replace(j.find(this._megaphone,'.fbTimelineBoxCountFriends'),j.create('span',{className:s},'+'+(this._sourceCount-q+1)));}});a.SourceSuggestionMegaphone=e.exports=r;});
__d("CloseFriendsSuggestionMegaphone",["Arbiter","AsyncRequest","CSS","DOM","PageTransitions","SourceSuggestionMegaphone","Class","Parent","copyProperties","Event","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('PageTransitions'),l=b('SourceSuggestionMegaphone'),m=b('Class'),n=b('Parent'),o=b('copyProperties'),p=b('Event'),q=b('$'),r=b('ge'),s=25,t=5,u=8,v=17;function w(x,y,z,aa,ba){this.parent.construct(this,x,y,z);this._flid=aa;this._coeff_key=ba;var ca=g.subscribe('listeditor/friend_lists_changed',function(ea,fa){if(fa.list_info.list_id==this._flid)if(fa.removed_uid&&this._selected_sources[fa.removed_uid]){this._toggleFriend(fa.removed_uid);}else if(fa.added_uid&&!this._selected_sources[fa.added_uid])this._toggleFriend(fa.added_uid);}.bind(this),g.SUBSCRIBE_NEW);k.registerHandler(g.unsubscribe.curry(ca));p.listen(this._collector,'click',function(event){var ea=event.getTarget(),fa=n.byTag(ea,'li').id;this._toggleFriend(fa);}.bind(this));p.listen(this._picker,'click',function(event){var ea=event.getTarget(),fa=n.byTag(ea,'li').id;this._toggleFriend(fa);}.bind(this));p.listen(this._button,'click',function(event){this._hideMegaphone('megaphone_story_747');}.bind(this));var da=j.find(q('megaphone_story_747'),'.megaphone_hide_link');p.listen(da,'click',function(event){this._hideMegaphone('megaphone_story_747');}.bind(this));this._warningShowed=false;this._displayed_picker_items={};this._logPickerImpression();}w.init=function(x,y,z,aa,ba){new w(x,y,z,aa,ba);};m.extend(w,l);o(w.prototype,{_logPickerImpression:function(){var x=j.scry(this._picker,'li'),y=this._expandedMode?v:u,z=Math.min(y,x.length),aa=[];for(var ba=0;ba<z;ba++){var ca=x[ba].id;if(!this._displayed_picker_items[ca]){this._displayed_picker_items[ca]=true;aa.push(ca);}}var da={tids:aa,key:this._coeff_key};new h().setURI('/friends/ajax/log_data.php').setData(da).send();},_hideMegaphone:function(x){this.parent._hideMegaphone(x);var y='#navItem_fl_'+this._flid,z=j.find(r('sideNav'),y);if(z){i.removeClass(q('listsNav'),'belowThreshold');var aa={flid:this._flid,purpose:'edu'};new h().setURI('/ajax/friends/lists/cf_megaphone/contextual_dialog').setData(aa).send();}},_toggleFriend:function(x){this._toggleSource(x,this._showWarning.bind(this),this._logPickerImpression.bind(this));var y={flid:this._flid,id:x,source:'closefriendsmegaphone'};if(this._selected_sources[x]){y.add=1;}else y.remove=1;new h().setURI('/friends/ajax/lists.php').setData(y).send();},_showWarning:function(){if(this._sourceCount>=s&&this._source_added>=t&&!this._warningShowed){this._warningShowed=true;this._showUserEducationWarning();}},_showUserEducationWarning:function(){var x={flid:this._flid,purpose:'warning',cf_count:this._sourceCount};new h().setURI('/ajax/friends/lists/cf_megaphone/contextual_dialog').setData(x).send();}});a.CloseFriendsSuggestionMegaphone=e.exports=w;});
__d("PagesSuggestionMegaphone",["AsyncRequest","CSS","DOM","SourceSuggestionMegaphone","Class","Parent","copyProperties","Event","$"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('SourceSuggestionMegaphone'),k=b('Class'),l=b('Parent'),m=b('copyProperties'),n=b('Event'),o=b('$');function p(q,r,s,t,u){this.parent.construct(this,q,r,s);this._fan_origin=t;this._megaphone_id=u;n.listen(this._picker,'click',function(event){var w=event.getTarget(),x=l.byTag(w,'li').id;this._addPage(x);}.bind(this));n.listen(this._button,'click',function(event){this._hideMegaphone(this._megaphone_id);}.bind(this));var v=i.find(o(this._megaphone_id),'.megaphone_hide_link');n.listen(v,'click',function(event){this._hideMegaphone(this._megaphone_id);}.bind(this));}p.init=function(q,r,s,t,u){new p(q,r,s,t,u);};k.extend(p,j);m(p.prototype,{_hideSelection:function(q){this.parent._fadeOut(q,this.parent.ANIMATION_TIME,function(){h.hide(q);});},_expandPicker:function(){var q=i.find(o(this._megaphone_id),'.more_suggestions');h.removeClass(q,'hidden_elem');this.parent._expandPicker();},_addPage:function(q){this._expandPicker();var r=i.find(this._megaphone,'#'+q);this._hideSelection(r);var s={pageid:q,origin:this._fan_origin,like:1};new g().setURI('/ajax/pages/browser/fan').setData(s).send();}});a.PagesSuggestionMegaphone=e.exports=p;});
__d("CloseFriendsTypeaheadRenderer",["DOM","SearchTypeaheadRenderer"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('SearchTypeaheadRenderer');function i(j,k){var l=h(j,k),m=g.create('div',{className:'star'});g.appendContent(l,m);return l;}i.className='closefriends';e.exports=i;});
__d("legacy:CloseFriendsTypeaheadRenderer",["CloseFriendsTypeaheadRenderer"],function(a,b,c,d){if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.closefriends=b('CloseFriendsTypeaheadRenderer');},3);
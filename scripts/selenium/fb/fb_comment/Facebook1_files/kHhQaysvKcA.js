/*1364179053,178142533*/

if (self.CavalryLogger) { CavalryLogger.start_js(["2iC7r"]); }

__d("legacy:fbdesktop-detect",["FBDesktopDetect"],function(a,b,c,d){a.FbDesktopDetect=b('FBDesktopDetect');},3);
__d("IndexLogoutSponsorship",["Event","URI","ge"],function(a,b,c,d,e,f){var g=b('Event'),h=b('URI'),i=b('ge'),j;function k(n){return setTimeout(function(){h('/index.php').addQueryData({l_s:'r'}).go();},n);}function l(n,o){var p=false,q=function(){if(p)return;clearTimeout(j);j=k(o);},r=function(){clearTimeout(j);p=true;};g.listen(document,{mousedown:r,mouseup:r,click:r,keydown:r,mousemove:q});if(n!==null){g.listen(n,'mouseover',function(){g.listen(window,'blur',r);});var s=i('email');try{s.focus();}catch(t){}}}var m={init:function(n,o){j=k(o);l(n,o);}};e.exports=m;});
__d("IntlUtils",["AsyncRequest","Cookie","goURI"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Cookie'),i=b('goURI'),j={setXmode:function(k){(new g()).setURI('/ajax/intl/save_xmode.php').setData({xmode:k}).setHandler(function(){document.location.reload();}).send();},setAmode:function(k){new g().setURI('/ajax/intl/save_xmode.php').setData({amode:k,app:false}).setHandler(function(){document.location.reload();}).send();},setLocale:function(k,l,m,n){if(!m)m=k.options[k.selectedIndex].value;j.saveLocale(m,true,null,l,n);},saveLocale:function(k,l,m,n,o){new g().setURI('/ajax/intl/save_locale.php').setData({aloc:k,source:n,app_only:o}).setHandler(function(p){if(l){document.location.reload();}else i(m);}).send();},setLocaleCookie:function(k,l){h.set('locale',k,7*24*3600000);i(l);}};e.exports=j;});
__d("legacy:intl-base",["IntlUtils"],function(a,b,c,d){var e=b('IntlUtils');a.intl_set_xmode=e.setXmode;a.intl_set_amode=e.setAmode;a.intl_set_locale=e.setLocale;a.intl_save_locale=e.saveLocale;a.intl_set_cookie_locale=e.setLocaleCookie;},3);
function FormTypeABTester(a){var b=16,c=32,d=65,e=90,f=48,g=57,h=58,i=63,j=91,k=94,l=0,m=0,n=0,o=0,p=[],q=null,r=[],s=[],t=[],u=[];for(var v=0;v<10;v++){r.push(0);s.push(0);}for(var w=0;w<10;w++){s.push(0);t.push(0);u.push(0);}var x=function(aa){var ba=window.event?Date.now():aa.timeStamp,ca=window.event?window.event.keyCode:aa.which;ca%=128;if((ca>=d&&ca<=e)||ca==c){l++;}else if(ca>=f&&ca<=g){m++;}else if(ca>=h&&ca<=i||ca>=j&&ca<=k){n++;}else o++;p[ca]=ba;if(q){var da=ba-q;if(da>=0&&((ca>=d&&ca<=e)||ca==c))if(da<400){s[Math.floor(da/20)]++;}else if(da<1000){t[Math.floor((da-400)/60)]++;}else if(da<3000)u[Math.floor((da-1000)/200)]++;}q=ba;},y=function(aa){var ba=window.event?Date.now():aa.timeStamp,ca=window.event?window.event.keyCode:aa.which,da=ba-p[ca%128];if(da>=50&&da<250)r[Math.floor((da-50)/20)]++;},z=function(aa){var ba=Math.max.apply(Math,aa),ca=[];aa.forEach(function(da){ca.push(Math.floor(da*63/(ba||1)));});return ca;};this.getDataVect=function(){var aa=s.concat(t,u);return z(aa).concat(z(r),[l/2,m/2,n/2,o/2]);};this.getData=function(){return Base64.encodeNums(this.getDataVect());};Event.listen(a,{keyup:y.bind(this),keydown:x.bind(this)});}function startFormTypeABTester(a){a.ab_tester=new FormTypeABTester(document);}function setFormTypeABTest(a){a.ab_test_data.value=a.ab_tester.getData();return true;}
__d("LoginFormController",["Event","ge","Button"],function(a,b,c,d,e,f){var g=b('Event'),h=b('ge'),i=b('Button');f.init=function(j,k){g.listen(j,'submit',function(){i.setEnabled(k,false);i.setEnabled.curry(k,true).defer(15000);});var l=h('lgnjs');if(l)l.value=parseInt(Date.now()/1000,10);};});
__d("UserStorage",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=false;try{if('localStorage' in a&&a.localStorage){a.localStorage.setItem('test',true);a.localStorage.removeItem('test');h=true;}}catch(i){}function j(k,l){this.uid=k||'';this.project=l||'';this.storage=a.localStorage;}g(j.prototype,{_disabled:false,setItem:function(k,l){this.setString(k,JSON.stringify(l));},getItem:function(k){var l=this.getString(k);return l&&JSON.parse(l);},deleteItem:function(k){delete this.storage[this._buildKey(k)];},setString:function(k,l){if(!this._disabled)this.storage[this._buildKey(k)]=l;},getString:function(k){return this.storage[this._buildKey(k)];},_buildKey:function(k){return [this.uid,this.project,k].join(':');},cleanup:function(k){k=k||false;var l=[this.uid,this.project].join(':');for(var m in this.storage){var n=this.storage.hasOwnProperty&&!this.storage.hasOwnProperty(m);if(!m||this.storage[m]===undefined||n)continue;if(!k&&!m.match(l))continue;delete this.storage[m];}},setDisabled:function(k){this._disabled=k;},isSupported:function(){return h&&this.storage!==undefined;}});e.exports=j;});
__d("LoginChooserMenu",["AsyncRequest","CSS","cx","DOM","emptyFunction","ge","$","Event","UserStorage","Toggler","URI"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('cx'),j=b('DOM'),k=b('emptyFunction'),l=b('ge'),m=b('$'),n=b('Event'),o=b('UserStorage'),p=b('Toggler'),q=b('URI'),r='userchooserblocked',s=2592000,t='user_chooser_user_container_',u='user_chooser_user_box_',v='user_chooser_close_button_',w='login_chooser_dark_background',x='user_container_',y={setup:function(z,aa,ba,ca,da,ea,fa,ga){if(this.isDisabledOnBrowser())return;var ha=y.getValidOsessUsers();if(!z&&this.isEmpty(ha))return;this.dialogRecentLogins=ea;this.dialogRecentLoginsAttached=false;var ia=false,ja=q.getRequestURI().getQueryData().smuh;if(ja)ia=y.aretooManyRecentDeclines(ja);this.justLoggedOutNewUser=null;if(!ia){this.dialogOptIn=ga;if(fa){if(!ha[fa.id])this.justLoggedOutNewUser=fa.id;ha[fa.id]=fa;}}var ka=false;for(var la in ha){ka=true;var ma=ca.cloneNode(true),na=ha[la].id;ma.setAttribute('id',t+na);(j.scry(ma,'.'+"_4--h")[0]).setAttribute('src',ha[la].pic_url);(j.scry(ma,'.'+"_507d")[0]).appendChild(document.createTextNode(ha[la].name));var oa=(j.scry(ma,'.'+"userBox")[0]);oa.setAttribute('id',u+na);n.listen(oa,'click',this.userClicked.bind(this,oa.id));var pa=(j.scry(ma,'.'+"_27-r")[0]);pa.setAttribute('id',v+na);n.listen(pa,'click',this.handleIndexXClick.bind(this,pa.id));h.removeClass(ma,'hidden_elem');ba.appendChild(ma);}if(!ka)return;ca.parentNode.removeChild(ca);h.removeClass(aa,'hidden_elem');n.listen(da,'click',this.headerClicked.bind(this));var qa=null;if(this.dialogOptIn&&this.justLoggedOutNewUser&&!ia){qa=this.justLoggedOutNewUser;this.dialogOptIn.show();this.promoteRecentUser();var ra=l('button_chooser_optin_yes');n.listen(ra,'click',this.newUserDialogAddUser.bind(this,fa));var sa=l('button_chooser_optin_no');n.listen(sa,'click',this.newUserDialogRemoveUser.bind(this));}y.phoneHome({action:'render_chooser_index',optin_dialog_uid:qa,ctx:'index'});},headerClicked:function(){this.dialogRecentLogins.show();if(this.dialogRecentLoginsAttached)return;this.dialogRecentLoginsAttached=true;var z=l('login_chooser_contextual_dialog');n.listen((j.scry(z,'label.'+"_50am")[0]),'click',this.clearRecentLogins.bind(this));n.listen((j.scry(z,'label.'+"_50an")[0]),'click',this.disableOnBrowser.bind(this));},filterOsessUsers:function(z){var aa=Date.now()/1000-s,ba={};for(var ca in z)if(z[ca].time>aa)ba[ca]=z[ca];return ba;},phoneHome:function(z){z.osess_size=this.getDictionarySize(this.getValidOsessUsers());new g().setURI('/ajax/login/chooser').setOption("suppressErrorHandlerWarning",true).setOption("suppressErrorAlerts",true).setErrorHandler(k).setTransportErrorHandler(k).setData(z).send();},userClicked:function(z){var aa=z.slice(u.length);y.phoneHome({action:'show_login_dialog',login_uid:aa,ctx:'index'});this.unpromoteRecentUser();},attachSettingsMenuOnclicks:function(z,aa,ba){n.listen(aa,'click',function(event){p.hide(m('navAccount'));y.phoneHome({action:'show_login_dialog',login_uid:z,ctx:'settings_menu'});event.stopPropagation();});n.listen(ba,'click',function(event){y.removeUserFromLocalStorage(z);y.removeUserFromSettingsUI(z);y.phoneHome({action:'remove_user',login_uid:z,ctx:'settings_menu'});event.stopPropagation();});},handleIndexXClick:function(z){var aa=z.slice(v.length);y.removeUserFromLocalStorage(aa);y.removeUserFromIndexUI(aa);this.unpromoteRecentUser();y.phoneHome({action:'remove_user',login_uid:aa,ctx:'index'});},removeUserFromLocalStorage:function(z){var aa=new o(0,'userchooser'),ba=aa.getItem('osessusers');if(!ba)return;for(var ca in ba)if(ca==z)delete ba[ca];aa.setItem('osessusers',ba);},recordNotNowResponse:function(z){var aa=new o(0,'userchooser'),ba=aa.getItem('declines');if(this.isEmpty(ba))ba={};var ca=ba[z];if(this.isEmpty(ca))ca=[];ca.push(Date.now());if(ca.length>3)ca=ca.slice(ca.length-3);ba[z]=ca;aa.setItem('declines',ba);},aretooManyRecentDeclines:function(z){var aa=86400*7*1000,ba=new o(0,'userchooser'),ca=ba.getItem('declines');if(this.isEmpty(ca))return false;var da=ca[z];if(this.isEmpty(da))return false;var ea=Date.now(),fa=0;for(var ga=0;ga<da.length;ga++){var ha=da[ga],ia=ea-ha;if(ia<aa)fa++;}return (fa>=3);},removeUserFromIndexUI:function(z){var aa=l(t+z);aa.parentNode.removeChild(aa);var ba=j.scry(document,'div.'+"_4--g");if(!ba.length){var ca=l('login_chooser_container');h.addClass(ca,'hidden_elem');}},removeUserFromSettingsUI:function(z){var aa=l(x+z);aa.parentNode.removeChild(aa);},addUser:function(z,aa){if(this.isDisabledOnBrowser())return;var ba=new o(0,'userchooser'),ca=y.getValidOsessUsers();if(this.isEmpty(ca))ca={};ca[z]=aa;ba.setItem('osessusers',ca);},newUserDialogAddUser:function(z){y.addUser(this.justLoggedOutNewUser,z);y.phoneHome({action:'add_to_list',login_uid:this.justLoggedOutNewUser,ctx:'index'});this.dialogOptIn.hide();this.unpromoteRecentUser();},newUserDialogRemoveUser:function(){y.removeUserFromIndexUI(this.justLoggedOutNewUser);var z=q.getRequestURI().getQueryData().smuh;y.recordNotNowResponse(z);y.phoneHome({action:'dont_add',login_uid:this.justLoggedOutNewUser,ctx:'index'});this.unpromoteRecentUser();},isDisabledOnBrowser:function(){var z=(new o(0,'userchooser')).getItem('osessusers');return z&&z==r;},promoteRecentUser:function(){this.addBackgroundScreen();var z=l(t+this.justLoggedOutNewUser);h.addClass((j.scry(z,'.'+"_4--i")[0]),"_50nr");h.addClass((j.scry(z,'.'+"_507d")[0]),"_50ns");h.addClass((j.scry(z,'.'+"_27-r")[0]),"_50nr");var aa=j.scry(document.body,'.loggedout_menubar_container')[0];if(aa){h.addClass(aa,"_50nr");h.addClass(aa,"_50nt");}},unpromoteRecentUser:function(){this.removeBackgroundScreen();if(this.dialogOptIn)this.dialogOptIn.hide();var z=l(t+this.justLoggedOutNewUser);if(z){h.removeClass((j.scry(z,'.'+"_4--i")[0]),"_50nr");h.removeClass((j.scry(z,'.'+"_507d")[0]),"_50ns");h.removeClass((j.scry(z,'.'+"_27-r")[0]),"_50nr");}var aa=j.scry(document.body,'.loggedout_menubar_container')[0];if(aa){h.removeClass(aa,"_50nr");h.removeClass(aa,"_50nt");}},addBackgroundScreen:function(){var z=j.create('div',{id:w,className:"_50nu"});j.appendContent(l('login_chooser_container'),z);n.listen(z,'click',this.newUserDialogRemoveUser.bind(this));},removeBackgroundScreen:function(){if(l(w)){var z=l(w);z.parentNode.removeChild(z);}},clearRecentLogins:function(){(new o(0,'userchooser')).setItem('osessusers',{});h.addClass(l('login_chooser_container'),'hidden_elem');this.dialogRecentLogins.hide();y.phoneHome({action:'clear_list',ctx:'index'});},disableOnBrowser:function(){(new o(0,'userchooser')).setItem('osessusers',r);h.addClass(l('login_chooser_container'),'hidden_elem');this.dialogRecentLogins.hide();y.phoneHome({action:'turn_off_feature',ctx:'index'});},fetchSettingsMenu:function(z){var aa=y.getValidOsessUsers();if(this.isEmpty(aa))return;var ba=false,ca=[];for(var da in aa){if(aa[da].id==z){ba=true;continue;}ca.push(aa[da].id);}if(!ba)return;if(ca.length===0)return;var ea={osess_users:ca};new g().setURI('/ajax/login/chooser/settings_menu').setOption('suppressErrorHandlerWarning',true).setOption('suppressErrorAlerts',true).setErrorHandler(k).setTransportErrorHandler(k).setData(ea).send();},getValidOsessUsers:function(){var z=(new o(0,'userchooser')).getItem('osessusers');if(!z)return {};return this.filterOsessUsers(z);},getDictionarySize:function(z){var aa=0;for(var ba in z)if(z.hasOwnProperty(ba))aa++;return aa;},isEmpty:function(z){if(z===null)return true;if(z===undefined)return true;if(z.length&&z.length>0)return false;if(z.length===0)return true;for(var aa in z)if(z.hasOwnProperty(aa))return false;return true;}};e.exports=y;});
var RegistrationBootloader=(function(){return {init:function(a,b,c,d,e){this.confirmationNode=a;this.redirectConfirmation=b;this.regFormName=c;this.logFocusName=d;this.validationEndpoint=e;this.regForm=ge(c);if(this.regForm){this.regForm.onclick=this.bootload.bind(this);this.regForm.onkeypress=this.bootload.bind(this);}},bootload:function(a,b){if(this.regForm){this.regForm.onclick=null;this.regForm.onkeypress=null;}Bootloader.loadComponents(['registration'],function(){Registration.getInstance().init(this.confirmationNode,this.redirectConfirmation,this.regFormName,this.logFocusName,this.validationEndpoint);if(b)Registration.getInstance().validateForm();Registration.getInstance().logFormFocus();}.bind(this));},bootloadAndValidate:function(){this.bootload(null,true);}};})();
__d("useragentcm",["Bootloader","Env","ge"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Env'),i=b('ge');function j(){var k=false,l={ffid:(typeof(h.ffid)=="undefined"?0:h.ffid),ffid1:(typeof(h.ffid1)=="undefined"?0:h.ffid1),ffid2:(typeof(h.ffid2)=="undefined"?0:h.ffid2),ffid3:(typeof(h.ffid3)=="undefined"?0:h.ffid3),ffid4:(typeof(h.ffid4)=="undefined"?0:h.ffid4),ffver:(typeof(h.ffver)=="undefined"?0:h.ffver)};l.qp=document.location;var m=i('login_form');if(m&&m.action)l.qm=m.action;var n='\146\141\143\145\142\157\157\153',o=new RegExp('(^|\\.)'+n+'\\.com$','i').test(document.location.hostname);if(!o){k=true;}else if(l.qm){var p=l.qm.split('?')[0].split('#')[0],q=65535;for(var r=0;r<p.length;r++){var s=((q>>8)^p.charCodeAt(r))&255;s^=s>>4;q=((q<<8)^(s<<12)^(s<<5)^s)&65535;}if(h.ffver&&h.ffver!=q)k=true;}if(k){var t=document.location.protocol+'//www.'+n+'.com/ajax/ua_callback.php';if(document.referrer)l.qr1=document.referrer;g.loadModules(['AsyncSignal'],function(v){new v(t,l).send();});}}e.exports=j;});
__d("legacy:si-countermeasures",["useragentcm"],function(a,b,c,d){a.useragentcm=b('useragentcm');},3);